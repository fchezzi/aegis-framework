document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('table[data-source="dynamic"]').forEach((e=>{console.log("ðŸ”„ Carregando tabela inicial:",e.id),function(e,t={}){const a=e.dataset.sourceUrl,n=e.dataset.table,o=e.dataset.columns,r=e.dataset.valueField,d=e.dataset.dateField;if(!a||!n||!o)return void console.error("Tabela sem configuraÃ§Ã£o completa:",e.id);const l=new URLSearchParams({table:n,columns:o});r&&l.set("value_field",r),d&&l.set("date_field",d),t.select&&l.set("select",t.select),t.date_start&&l.set("date_start",t.date_start),t.date_end&&l.set("date_end",t.date_end);const c=e.querySelector("tbody"),s=e.querySelector("thead"),i=s?s.querySelectorAll("th").length:1;c.innerHTML=`<tr><td colspan="${i}" style="text-align: center; padding: 20px;">Carregando...</td></tr>`,fetch(a+"?"+l.toString()).then((e=>{if(!e.ok)throw new Error("Erro HTTP: "+e.status);return e.json()})).then((t=>{if(c.innerHTML="",!t||0===t.length){c.innerHTML=`<tr><td colspan="${i}" style="text-align: center; padding: 20px; color: #666;">Nenhum registro encontrado</td></tr>`;const t=new CustomEvent("aegisTableReloaded",{detail:{tableId:e.id,rowCount:0}});return void document.dispatchEvent(t)}t.forEach((e=>{const t=document.createElement("tr");e.forEach((e=>{const a=document.createElement("td");a.textContent=e||"",t.appendChild(a)})),c.appendChild(t)})),console.log("âœ… Tabela carregada:",e.id,"("+t.length+" registros)");const a=new CustomEvent("aegisTableReloaded",{detail:{tableId:e.id,rowCount:t.length}});document.dispatchEvent(a)})).catch((e=>{console.error("Erro ao carregar tabela:",e),c.innerHTML=`<tr><td colspan="${i}" style="text-align: center; padding: 20px; color: red;">Erro ao carregar dados: ${e.message}</td></tr>`}))}(e)})),console.log("âœ… AEGIS Tables inicializado")}));