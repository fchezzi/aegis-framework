<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
	<meta charset="utf-8"/>
</head>
<body>

<h1 id="üöÄaegis-roadmapconsolidadodemelhorias">üöÄ AEGIS - Roadmap Consolidado de Melhorias</h1>

<blockquote>
<p>Documento √öNICO consolidando roadmap estrat√©gico + guia pr√°tico de instala√ß√£o
Criado em: 15/02/2026</p>
</blockquote>

<hr />

<h2 id="üìästatusatual">üìä STATUS ATUAL</h2>

<p><strong>Vers√£o:</strong> 17.3.6</p>

<p><strong>J√° implementado:</strong></p>

<ul>
<li>‚úÖ Google Tag Manager</li>
<li>‚úÖ Favicons customiz√°veis</li>
<li>‚úÖ Credenciais FTP</li>
<li>‚úÖ Sistema de Settings completo</li>
<li>‚úÖ M√≥dulo Artigos + Email + RD Station</li>
<li>‚úÖ <strong>PageSpeed Insights v2.0 (COMPLETO - 15/02/2026)</strong></li>
<li> Sistema de URLs din√¢micas (CRUD)</li>
<li> Queue/Status system (pending ‚Üí processing ‚Üí completed/failed)</li>
<li> Background processing com mediana</li>
<li> 100% Lucide icons (13 substitui√ß√µes)</li>
<li> Extra√ß√£o FULL de dados (98% √∫teis)</li>
<li> 2 tabelas, 4 migrations, 22 arquivos, 6 rotas</li>
<li> <strong>Documenta√ß√£o completa:</strong> <code>pagespeed-insights.md</code>, <code>pagespeed-summary.md</code>, <code>pagespeed-quickstart.md</code></li>
</ul>

<hr />

<h2 id="üîñpontodeparada15022026">üîñ PONTO DE PARADA (15/02/2026)</h2>

<p><strong>Status Atual:</strong></p>

<ul>
<li>‚úÖ PageSpeed Insights v2.0 <strong>100% finalizado e operacional</strong></li>
<li>‚úÖ Roadmap consolidado documentado (este arquivo)</li>
</ul>

<p><strong>Pr√≥xima Implementa√ß√£o:</strong></p>

<ul>
<li><strong>TIER 1 / Semana 1</strong> ‚Üí <strong>Uptime Monitoring (UptimeRobot)</strong> - 5min</li>
<li><strong>Decis√£o pendente:</strong> Como verificar no painel se est√° configurado</li>
<li> Op√ß√£o 1: Widget com webhook (dados reais via webhook)</li>
<li> Op√ß√£o 2: API do UptimeRobot (dados ao vivo)</li>
<li> Op√ß√£o 3: Indicador simples on/off (b√°sico)</li>
</ul>

<p><strong>Para retomar:</strong></p>

<pre><code>Continuar implementa√ß√£o AEGIS TIER 1 - Uptime Monitoring
Decidir entre: webhook, API ou indicador simples no painel
</code></pre>

<hr />

<h2 id="üéØpr√ìximasimplementa√á√ïesordemdeexecu√ß√£o">üéØ PR√ìXIMAS IMPLEMENTA√á√ïES (Ordem de Execu√ß√£o)</h2>

<h3 id="semana1-tier14h-5h-80dovalor"><strong>SEMANA 1 - TIER 1</strong> (4h-5h - 80% do valor)</h3>

<pre><code>[ ] 1.  Uptime Monitoring      ‚Üí  5min   (UptimeRobot - CR√çTICO)
[ ] 2.  HTTPS/SSL              ‚Üí  2min   (Verifica√ß√£o - CR√çTICO)
[ ] 3.  GTM/GA4 Valida√ß√£o      ‚Üí  3min   (Confirmar funcionando)
[ ] 4.  robots.txt             ‚Üí  5min   (Criar arquivo)
[ ] 5.  Security Headers       ‚Üí 40min   (bootstrap.php - ALTO)
[ ] 6.  Sitemap Autom√°tico     ‚Üí 30min   (sitemap.xml.php)
[ ] 7.  PHPStan                ‚Üí 10min   (An√°lise est√°tica)
[ ] 8.  Backup Autom√°tico n8n  ‚Üí  1-2h   (MySQL + arquivos - CR√çTICO)
[ ] 9.  Relat√≥rios IA          ‚Üí  2-3h   (Dashboard di√°rio - ALTO)
</code></pre>

<p><strong>TOTAL:</strong> 4h-5h | <strong>Resultado:</strong> Site monitorado 24/7, backup funcionando, primeiro relat√≥rio IA</p>

<hr />

<h3 id="semana2-tier212h-14h-15dovalor"><strong>SEMANA 2 - TIER 2</strong> (12h-14h - +15% do valor)</h3>

<pre><code>[ ] 10. Rate Limiting          ‚Üí  2h     (Classe + prote√ß√£o brute force)
[ ] 11. Search Console API     ‚Üí  5-6h   (Queries, posi√ß√µes, CWV)
[ ] 12. Google Analytics API   ‚Üí  4-5h   (Tr√°fego, widgets dashboard)
</code></pre>

<p><strong>TOTAL:</strong> 12h-14h | <strong>Resultado:</strong> SEO rastreado, Analytics sincronizado, prote√ß√£o contra bots</p>

<hr />

<h3 id="semana3-tier36h-7h-5dovalor"><strong>SEMANA 3 - TIER 3</strong> (6h-7h - +5% do valor)</h3>

<pre><code>[ ] 13. Logger Melhorado       ‚Üí  3h     (Logs estruturados MySQL)
[ ] 14. Cruzamento Dados IA    ‚Üí  2h     (GA + GSC + PageSpeed insights)
[ ] 15. PHP_CodeSniffer        ‚Üí 15min   (Padr√£o c√≥digo PSR-12)
[ ] 16. Microsoft Clarity      ‚Üí 10min   (Heatmaps + session recording)
[ ] 17. Pa11y                  ‚Üí 30min   (Acessibilidade WCAG)
</code></pre>

<p><strong>TOTAL:</strong> 6h-7h | <strong>Resultado:</strong> Logs pesquis√°veis, oportunidades IA detectadas, qualidade c√≥digo</p>

<hr />

<h3 id="semana4-tier43h-4h-opcional"><strong>SEMANA 4 - TIER 4</strong> (3h-4h - Opcional)</h3>

<pre><code>[ ] 18. Event Tracking GA4     ‚Üí  2h     (Convers√µes, downloads, scroll)
[ ] 19. CDN Cloudflare         ‚Üí 15min   (Cache global - se alto tr√°fego)
[ ] 20. Documenta√ß√£o Completa  ‚Üí  2h     (Admin guides + docs t√©cnicos)
[ ] 21. Testes End-to-End      ‚Üí  1h     (Valida√ß√£o completa integrada)
</code></pre>

<p><strong>TOTAL:</strong> 3h-4h | <strong>Resultado:</strong> Sistema documentado, testado, pronto para produ√ß√£o</p>

<hr />

<h3 id="üìäresumogeral">üìä RESUMO GERAL</h3>

<table>
<colgroup>
<col />
<col />
<col />
<col />
<col />
</colgroup>

<thead>
<tr>
	<th> Semana </th>
	<th> TIER </th>
	<th> Itens </th>
	<th> Tempo </th>
	<th> Impacto </th>
</tr>
</thead>

<tbody>
<tr>
	<td> <strong>Semana 1</strong> </td>
	<td> TIER 1 </td>
	<td> 9 itens </td>
	<td> 4&#8211;5h </td>
	<td> <strong>80%</strong> </td>
</tr>
<tr>
	<td> <strong>Semana 2</strong> </td>
	<td> TIER 2 </td>
	<td> 3 itens </td>
	<td> 12&#8211;14h </td>
	<td> <strong>+15%</strong> </td>
</tr>
<tr>
	<td> <strong>Semana 3</strong> </td>
	<td> TIER 3 </td>
	<td> 5 itens </td>
	<td> 6&#8211;7h </td>
	<td> <strong>+5%</strong> </td>
</tr>
<tr>
	<td> <strong>Semana 4</strong> </td>
	<td> TIER 4 </td>
	<td> 4 itens </td>
	<td> 3&#8211;4h </td>
	<td> Nice to have </td>
</tr>
<tr>
	<td> <strong>TOTAL</strong> </td>
	<td> - </td>
	<td> <strong>21 itens</strong> </td>
	<td> <strong>25&#8211;30h</strong> </td>
	<td> <strong>100%</strong> </td>
</tr>
</tbody>
</table>

<p><strong>Custo total:</strong> $0&#8211;0.12/m√™s
<strong>Economia vs WordPress:</strong> $400&#8211;800/ano por projeto</p>

<hr />

<h2 id="üìãresumoexecutivo">üìã RESUMO EXECUTIVO</h2>

<h3 id="üéØvis√£ogeral">üéØ Vis√£o Geral</h3>

<p><strong>Objetivo:</strong> Transformar AEGIS em framework com monitoramento completo, automa√ß√£o inteligente e custo zero.</p>

<p><strong>Prazo:</strong> 4 semanas (25&#8211;30h desenvolvimento)
<strong>Custo:</strong> $0&#8211;0.12/m√™s por projeto
<strong>ROI:</strong> Economia de $400&#8211;800/ano vs plugins pagos + 5&#8211;10h/m√™s de tempo</p>

<p><strong>Organiza√ß√£o:</strong> Pareto 80/20 (TIER 1 = 80% do valor em 20% do tempo)</p>

<hr />

<h2 id="üìãlistacompletaconsolidada">üìã LISTA COMPLETA CONSOLIDADA</h2>

<h3 id="üî¥tier1:essencial4h-5h-80dovalor">üî¥ TIER 1: ESSENCIAL (4h-5h - 80% do valor)</h3>

<p><strong>Semana 1 - Funda√ß√£o Cr√≠tica</strong></p>

<table>
<colgroup>
<col />
<col />
<col />
<col />
<col />
</colgroup>

<thead>
<tr>
	<th> # </th>
	<th> Item </th>
	<th> Tempo </th>
	<th> Impacto </th>
	<th> Status </th>
</tr>
</thead>

<tbody>
<tr>
	<td> 1 </td>
	<td> Uptime Monitoring </td>
	<td> 5min </td>
	<td> CR√çTICO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 2 </td>
	<td> Security Headers </td>
	<td> 40min </td>
	<td> ALTO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 3 </td>
	<td> Backup Autom√°tico </td>
	<td> 1&#8211;2h </td>
	<td> CR√çTICO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 4 </td>
	<td> Relat√≥rios IA </td>
	<td> 2&#8211;3h </td>
	<td> ALTO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 5 </td>
	<td> HTTPS/SSL </td>
	<td> 2min </td>
	<td> CR√çTICO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 6 </td>
	<td> GTM/GA4 Valida√ß√£o </td>
	<td> 3min </td>
	<td> ALTO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 7 </td>
	<td> robots.txt </td>
	<td> 5min </td>
	<td> M√âDIO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 8 </td>
	<td> Sitemap Autom√°tico </td>
	<td> 30min </td>
	<td> ALTO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 9 </td>
	<td> PHPStan </td>
	<td> 10min </td>
	<td> M√âDIO </td>
	<td> [ ] </td>
</tr>
</tbody>

<tbody>
<tr>
	<td><strong>TOTAL TIER 1:</strong> 4h-5h </td>
	<td> <strong>Impacto:</strong> 80% do valor</td>
</tr>
</tbody>
</table>

<hr />

<h3 id="üü†tier2:importante12h-14h-15dovalor">üü† TIER 2: IMPORTANTE (12h-14h - +15% do valor)</h3>

<p><strong>Semana 2 - Seguran√ßa + SEO Base</strong></p>

<table>
<colgroup>
<col />
<col />
<col />
<col />
<col />
</colgroup>

<thead>
<tr>
	<th> # </th>
	<th> Item </th>
	<th> Tempo </th>
	<th> Impacto </th>
	<th> Status </th>
</tr>
</thead>

<tbody>
<tr>
	<td> 10 </td>
	<td> Rate Limiting </td>
	<td> 2h </td>
	<td> ALTO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 11 </td>
	<td> Google Search Console API </td>
	<td> 5&#8211;6h </td>
	<td> ALTO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 12 </td>
	<td> Google Analytics API </td>
	<td> 4&#8211;5h </td>
	<td> M√âDIO </td>
	<td> [ ] </td>
</tr>
</tbody>

<tbody>
<tr>
	<td><strong>TOTAL TIER 2:</strong> 12h-14h </td>
	<td> <strong>Impacto:</strong> +15% do valor</td>
</tr>
</tbody>
</table>

<hr />

<h3 id="üü°tier3:bomter6h-7h-5dovalor">üü° TIER 3: BOM TER (6h-7h - +5% do valor)</h3>

<p><strong>Semana 3 - SEO Completo + Logs</strong></p>

<table>
<colgroup>
<col />
<col />
<col />
<col />
<col />
</colgroup>

<thead>
<tr>
	<th> # </th>
	<th> Item </th>
	<th> Tempo </th>
	<th> Impacto </th>
	<th> Status </th>
</tr>
</thead>

<tbody>
<tr>
	<td> 13 </td>
	<td> Logger Melhorado </td>
	<td> 3h </td>
	<td> M√âDIO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 14 </td>
	<td> Cruzamento de Dados IA </td>
	<td> 2h </td>
	<td> M√âDIO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 15 </td>
	<td> PHP_CodeSniffer </td>
	<td> 15min </td>
	<td> BAIXO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 16 </td>
	<td> Microsoft Clarity </td>
	<td> 10min </td>
	<td> BAIXO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 17 </td>
	<td> Pa11y (Acessibilidade) </td>
	<td> 30min </td>
	<td> BAIXO </td>
	<td> [ ] </td>
</tr>
</tbody>

<tbody>
<tr>
	<td><strong>TOTAL TIER 3:</strong> 6h-7h </td>
	<td> <strong>Impacto:</strong> +5% do valor</td>
</tr>
</tbody>
</table>

<hr />

<h3 id="üü¢tier4:opcional3h-4h-nicetohave">üü¢ TIER 4: OPCIONAL (3h-4h - Nice to Have)</h3>

<p><strong>Semana 4 - Extras + Finaliza√ß√£o</strong></p>

<table>
<colgroup>
<col />
<col />
<col />
<col />
<col />
</colgroup>

<thead>
<tr>
	<th> # </th>
	<th> Item </th>
	<th> Tempo </th>
	<th> Impacto </th>
	<th> Status </th>
</tr>
</thead>

<tbody>
<tr>
	<td> 18 </td>
	<td> Event Tracking GA4 </td>
	<td> 2h </td>
	<td> BAIXO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 19 </td>
	<td> CDN Cloudflare </td>
	<td> 15min </td>
	<td> BAIXO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 20 </td>
	<td> Documenta√ß√£o Completa </td>
	<td> 2h </td>
	<td> M√âDIO </td>
	<td> [ ] </td>
</tr>
<tr>
	<td> 21 </td>
	<td> Testes End-to-End </td>
	<td> 1h </td>
	<td> M√âDIO </td>
	<td> [ ] </td>
</tr>
</tbody>
</table>

<p><strong>TOTAL TIER 4:</strong> 3h-4h</p>

<hr />

<h2 id="üöÄimplementa√á√Éodetalhada">üöÄ IMPLEMENTA√á√ÉO DETALHADA</h2>

<h3 id="tier1:essencial4h-5h"><strong>TIER 1: ESSENCIAL (4h-5h)</strong></h3>

<hr />

<h4 id="1.uptimemonitoring5min-cr√çtico"><strong>1. Uptime Monitoring</strong> (5min) - CR√çTICO</h4>

<p><strong>Objetivo:</strong> Detectar site fora do ar antes do cliente reclamar</p>

<p><strong>Op√ß√£o A: UptimeRobot (RECOMENDADO)</strong></p>

<ul>
<li>‚úÖ Gr√°tis at√© 50 monitores</li>
<li>Verifica a cada 5min</li>
<li>Alertas: Email, SMS, Slack, Telegram, Webhook</li>
<li>Dashboard com hist√≥rico de uptime (99.9%, etc)</li>
</ul>

<p><strong>Instala√ß√£o:</strong></p>

<pre><code class="bash"># 1. Acessar
open https://uptimerobot.com

# 2. Sign Up (gr√°tis, 50 monitores)

# 3. Add New Monitor:
#    - Monitor Type: HTTP(s)
#    - Friendly Name: AEGIS - [Nome do Projeto]
#    - URL: https://seusite.com
#    - Monitoring Interval: 5 minutes

# 4. Alert Contacts:
#    - Email: seu@email.com
#    - Telegram (opcional): conectar bot

# 5. Create Monitor
</code></pre>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] Monitor ativo (status verde)</li>
<li>[ ] Testar: pausar servidor ‚Üí alerta chega em 5min</li>
<li>[ ] Email de alerta configurado</li>
</ul>

<p><strong>Estimativa:</strong> 5min
<strong>Custo:</strong> $0/m√™s
<strong>Prioridade:</strong> CR√çTICA</p>

<hr />

<h4 id="2.securityheaders40min-alto"><strong>2. Security Headers</strong> (40min) - ALTO</h4>

<p><strong>Objetivo:</strong> Proteger contra XSS, clickjacking, MIME sniffing</p>

<p><strong>Implementa√ß√£o:</strong></p>

<p><strong>Arquivo: <code>bootstrap.php</code> (adicionar no topo)</strong></p>

<pre><code class="php">// Security Headers
header(&quot;X-Frame-Options: SAMEORIGIN&quot;); // Anti-clickjacking
header(&quot;X-Content-Type-Options: nosniff&quot;); // Anti-MIME sniffing
header(&quot;X-XSS-Protection: 1; mode=block&quot;); // Anti-XSS (legacy browsers)
header(&quot;Referrer-Policy: strict-origin-when-cross-origin&quot;);
header(&quot;Permissions-Policy: geolocation=(), microphone=(), camera=()&quot;);

// Content Security Policy (ajustar conforme necess√°rio)
$csp = &quot;default-src 'self'; &quot;;
$csp .= &quot;script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://www.google-analytics.com https://unpkg.com; &quot;;
$csp .= &quot;style-src 'self' 'unsafe-inline'; &quot;;
$csp .= &quot;img-src 'self' data: https:; &quot;;
$csp .= &quot;font-src 'self' data:; &quot;;
$csp .= &quot;connect-src 'self' https://www.google-analytics.com; &quot;;
$csp .= &quot;frame-ancestors 'self';&quot;;

header(&quot;Content-Security-Policy: &quot; . $csp);

// HSTS (s√≥ em produ√ß√£o com HTTPS)
if ($_SERVER['HTTPS'] ?? false) {
    header(&quot;Strict-Transport-Security: max-age=31536000; includeSubDomains&quot;);
}
</code></pre>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] https://securityheaders.com score ‚â• A</li>
<li>[ ] Site funciona normalmente (GTM, fontes, imagens)</li>
<li>[ ] Console sem erros CSP</li>
<li>[ ] HSTS funcionando (s√≥ HTTPS)</li>
</ul>

<p><strong>Estimativa:</strong> 10&#8211;30min (testar cuidadosamente)
<strong>Custo:</strong> $0
<strong>Prioridade:</strong> ALTA</p>

<hr />

<h4 id="3.backupautom√°tico1-2h-cr√çtico"><strong>3. Backup Autom√°tico</strong> (1&#8211;2h) - CR√çTICO</h4>

<p><strong>Objetivo:</strong> Backup di√°rio do banco + arquivos com hist√≥rico de 30 dias</p>

<p><strong>Implementa√ß√£o n8n:</strong></p>

<p><strong>Workflow di√°rio (3h):</strong></p>

<ol>
<li><strong>MySQL Dump:</strong></li>
</ol>

<pre><code class="bash">mysqldump -u user -p'pass' database | gzip &gt; backup-$(date +%Y%m%d).sql.gz
</code></pre>

<ol>
<li><strong>Tar arquivos:</strong></li>
</ol>

<pre><code class="bash">tar -czf files-$(date +%Y%m%d).tar.gz /path/to/aegis \
  --exclude='storage/logs' \
  --exclude='storage/cache' \
  --exclude='node_modules'
</code></pre>

<ol>
<li><strong>Upload destino:</strong></li>
</ol>

<ul>
<li> Google Drive (API gr√°tis, 15GB)</li>
<li> Dropbox (API gr√°tis, 2GB)</li>
<li> AWS S3 (~$0.50/m√™s por projeto)</li>
</ul>

<ol>
<li><strong>Limpeza:</strong></li>
</ol>

<pre><code class="bash">find /backups -name &quot;*.gz&quot; -mtime +30 -delete
</code></pre>

<ol>
<li><strong>Notifica√ß√£o:</strong></li>
</ol>

<ul>
<li> Sucesso: Log silencioso</li>
<li> Falha: Alerta URGENTE</li>
</ul>

<p><strong>Nodes n8n:</strong></p>

<pre><code>1. Cron (Every Day, 3:00)
2. Execute Command (MySQL Dump)
3. Execute Command (Tar Files)
4. Google Drive Upload (db-*.sql.gz)
5. Google Drive Upload (files-*.tar.gz)
6. Execute Command (Cleanup old backups)
7. Send Email/Telegram (Success notification)
8. Error Workflow (Send URGENT alert)
</code></pre>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] Workflow criado e ativo</li>
<li>[ ] Executar manual ‚Üí arquivos criados</li>
<li>[ ] Upload Google Drive OK</li>
<li>[ ] <strong>CR√çTICO:</strong> Testar restaura√ß√£o (criar DB teste)</li>
<li>[ ] Rota√ß√£o 30 dias funciona</li>
</ul>

<p><strong>Estimativa:</strong> 1&#8211;2h dev
<strong>Custo:</strong> $0&#8211;0.50/m√™s (depende do destino)
<strong>Prioridade:</strong> CR√çTICA</p>

<hr />

<h4 id="4.relat√≥riosiaautom√°ticos2-3h-alto"><strong>4. Relat√≥rios IA Autom√°ticos</strong> (2&#8211;3h) - ALTO</h4>

<p><strong>Objetivo:</strong> Relat√≥rios di√°rios autom√°ticos com insights de IA salvos no admin</p>

<p><strong>Implementa√ß√£o:</strong></p>

<p><strong>Tabela MySQL:</strong></p>

<pre><code class="sql">CREATE TABLE ai_reports (
    id CHAR(36) PRIMARY KEY,
    type ENUM('daily', 'weekly', 'alert', 'custom') NOT NULL,
    title VARCHAR(255) NOT NULL,
    summary TEXT,
    content LONGTEXT,
    severity ENUM('info', 'warning', 'critical') DEFAULT 'info',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_created (created_at),
    INDEX idx_type (type),
    INDEX idx_severity (severity)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
</code></pre>

<p><strong>API Endpoint:</strong> <code>api/ai-reports.php</code></p>

<pre><code class="php">&lt;?php
require_once '../bootstrap.php';

// Autentica√ß√£o via webhook secret
$secret = $_POST['webhook_secret'] ?? '';
$expectedSecret = Settings::get('ai_webhook_secret');

if ($secret !== $expectedSecret) {
    http_response_code(401);
    exit(json_encode(['error' =&gt; 'Unauthorized']));
}

$data = [
    'id' =&gt; Core::generateUUID(),
    'type' =&gt; $_POST['type'] ?? 'daily',
    'title' =&gt; $_POST['title'] ?? '',
    'summary' =&gt; $_POST['summary'] ?? '',
    'content' =&gt; $_POST['content'] ?? '',
    'severity' =&gt; $_POST['severity'] ?? 'info'
];

$db = DB::connect();
$stmt = $db-&gt;prepare(&quot;
    INSERT INTO ai_reports (id, type, title, summary, content, severity)
    VALUES (?, ?, ?, ?, ?, ?)
&quot;);

$stmt-&gt;execute([
    $data['id'],
    $data['type'],
    $data['title'],
    $data['summary'],
    $data['content'],
    $data['severity']
]);

echo json_encode(['success' =&gt; true, 'id' =&gt; $data['id']]);
</code></pre>

<p><strong>n8n Workflow di√°rio (8h):</strong></p>

<pre><code>1. Cron (Every Day, 8:00)
2. Execute Command (Claude Code CLI)
   ‚Üí Comando: claude --prompt &quot;Analise AEGIS e gere relat√≥rio markdown&quot;
3. HTTP Request POST (api/ai-reports.php)
   ‚Üí Body: { webhook_secret, type, title, summary, content, severity }
4. Send Email (resumo + link relat√≥rio completo)
5. Send Telegram (opcional - resumo curto)
</code></pre>

<p><strong>Views Admin:</strong></p>

<ul>
<li><code>/admin/ai-reports</code> (lista com cards)</li>
<li><code>/admin/ai-reports/view/:id</code> (relat√≥rio completo)</li>
</ul>

<p><strong>Dados do relat√≥rio:</strong></p>

<ul>
<li>Erros de logs (√∫ltimas 24h)</li>
<li>PageSpeed das 5 p√°ginas principais</li>
<li>Convers√µes/visitas (se Analytics integrado)</li>
<li>Problemas cr√≠ticos identificados</li>
<li>Sugest√µes de melhorias</li>
</ul>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] Relat√≥rio gerado automaticamente todo dia 8h</li>
<li>[ ] Email recebido com resumo correto</li>
<li>[ ] Admin (<code>/admin/ai-reports</code>) mostra √∫ltimos 30 relat√≥rios</li>
<li>[ ] Relat√≥rio individual abre corretamente</li>
<li>[ ] Alertas funcionam (simular erro cr√≠tico e verificar notifica√ß√£o)</li>
</ul>

<p><strong>Estimativa:</strong> 2&#8211;3h dev
<strong>Custo:</strong> $0/m√™s (Claude Code local)
<strong>Prioridade:</strong> ALTA</p>

<hr />

<h4 id="5.httpsssl2min-cr√çtico"><strong>5. HTTPS/SSL</strong> (2min) - CR√çTICO</h4>

<p><strong>Objetivo:</strong> Confirmar que site est√° com certificado SSL ativo</p>

<p><strong>Passos:</strong></p>

<ol>
<li>Abrir navegador</li>
<li>Acessar: <code>https://seusite.com</code></li>
<li>Verificar cadeado verde no navegador</li>
<li>Clicar no cadeado ‚Üí Certificado v√°lido?</li>
</ol>

<p><strong>Se n√£o tiver HTTPS:</strong></p>

<ul>
<li>PARAR TUDO</li>
<li>Instalar Let&#8217;s Encrypt (gr√°tis)</li>
<li>Configurar redirect HTTP ‚Üí HTTPS</li>
</ul>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] URL come√ßa com <code>https://</code></li>
<li>[ ] Navegador n√£o mostra &#8220;N√£o seguro&#8221;</li>
<li>[ ] Certificado v√°lido (n√£o expirado)</li>
</ul>

<hr />

<h4 id="6.gtmga4valida√ß√£o3min-alto"><strong>6. GTM/GA4 Valida√ß√£o</strong> (3min) - ALTO</h4>

<p><strong>Objetivo:</strong> Confirmar que Google Tag Manager e Analytics funcionam</p>

<p><strong>Passos:</strong></p>

<ol>
<li>Abrir site no navegador</li>
<li>F12 ‚Üí Console</li>
<li>Procurar mensagens GTM (sem erros)</li>
<li>Google Analytics ‚Üí Relat√≥rios ‚Üí Tempo Real</li>
<li>Navegar no site e ver sess√£o aparecendo</li>
</ol>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] GTM carrega sem erros (console limpo)</li>
<li>[ ] GA4 mostra visita em Tempo Real</li>
<li>[ ] dataLayer funcionando</li>
</ul>

<hr />

<h4 id="7.robots.txt5min-m√âdio"><strong>7. robots.txt</strong> (5min) - M√âDIO</h4>

<p><strong>Objetivo:</strong> Criar arquivo robots.txt para controlar indexa√ß√£o Google</p>

<p><strong>Arquivo:</strong> <code>/public/robots.txt</code></p>

<pre><code class="txt">User-agent: *
Disallow: /admin/
Disallow: /api/
Disallow: /storage/logs/
Disallow: /storage/cache/
Allow: /storage/uploads/

Sitemap: https://seusite.com/sitemap.xml
</code></pre>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] Acessar <code>https://seusite.com/robots.txt</code></li>
<li>[ ] Arquivo aparece corretamente</li>
<li>[ ] Testar no Google: https://www.google.com/webmasters/tools/robots-testing-tool</li>
</ul>

<hr />

<h4 id="8.sitemapautom√°tico30min-alto"><strong>8. Sitemap Autom√°tico</strong> (30min) - ALTO</h4>

<p><strong>Objetivo:</strong> Sitemap.xml gerado automaticamente a partir do banco</p>

<p><strong>Arquivo:</strong> <code>/public/sitemap.xml.php</code></p>

<pre><code class="php">&lt;?php
require_once '../bootstrap.php';

header('Content-Type: application/xml; charset=utf-8');

$db = DB::connect();

// P√°ginas p√∫blicas
$pages = $db-&gt;query(&quot;
    SELECT slug, updated_at
    FROM pages
    WHERE ativo = 1
    AND (seo_robots NOT LIKE '%noindex%' OR seo_robots IS NULL)
    ORDER BY updated_at DESC
&quot;)-&gt;fetchAll();

// M√≥dulos p√∫blicos
$modules = [];
foreach (glob(ROOT_PATH . 'modules/*/module.json') as $file) {
    $config = json_decode(file_get_contents($file), true);
    if ($config['public'] ?? false) {
        $modules[] = [
            'slug' =&gt; basename(dirname($file)),
            'updated_at' =&gt; date('Y-m-d', filemtime($file))
        ];
    }
}

echo '&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;';
echo '&lt;urlset xmlns=&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;&gt;';

// Homepage
echo &quot;&lt;url&gt;&quot;;
echo &quot;&lt;loc&gt;&quot; . htmlspecialchars(APP_URL) . &quot;&lt;/loc&gt;&quot;;
echo &quot;&lt;priority&gt;1.0&lt;/priority&gt;&quot;;
echo &quot;&lt;changefreq&gt;daily&lt;/changefreq&gt;&quot;;
echo &quot;&lt;/url&gt;&quot;;

// P√°ginas
foreach ($pages as $page) {
    echo &quot;&lt;url&gt;&quot;;
    echo &quot;&lt;loc&gt;&quot; . htmlspecialchars(url('/' . $page['slug'])) . &quot;&lt;/loc&gt;&quot;;
    echo &quot;&lt;lastmod&gt;&quot; . date('Y-m-d', strtotime($page['updated_at'])) . &quot;&lt;/lastmod&gt;&quot;;
    echo &quot;&lt;priority&gt;0.8&lt;/priority&gt;&quot;;
    echo &quot;&lt;changefreq&gt;weekly&lt;/changefreq&gt;&quot;;
    echo &quot;&lt;/url&gt;&quot;;
}

// M√≥dulos
foreach ($modules as $module) {
    echo &quot;&lt;url&gt;&quot;;
    echo &quot;&lt;loc&gt;&quot; . htmlspecialchars(url('/' . $module['slug'])) . &quot;&lt;/loc&gt;&quot;;
    echo &quot;&lt;lastmod&gt;{$module['updated_at']}&lt;/lastmod&gt;&quot;;
    echo &quot;&lt;priority&gt;0.7&lt;/priority&gt;&quot;;
    echo &quot;&lt;changefreq&gt;weekly&lt;/changefreq&gt;&quot;;
    echo &quot;&lt;/url&gt;&quot;;
}

echo '&lt;/urlset&gt;';
</code></pre>

<p><strong>n8n workflow (semanal):</strong></p>

<pre><code>Cron (domingo 2h):
  ‚Üí HTTP GET seusite.com/sitemap.xml.php
  ‚Üí Save file public/sitemap.xml
  ‚Üí Submit to Google Search Console (API)
</code></pre>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] <code>/sitemap.xml</code> acess√≠vel e v√°lido</li>
<li>[ ] Todas p√°ginas p√∫blicas listadas</li>
<li>[ ] M√≥dulos p√∫blicos listados</li>
<li>[ ] Google Search Console aceita o sitemap</li>
</ul>

<p><strong>Estimativa:</strong> 30min-1h dev
<strong>Custo:</strong> $0
<strong>Prioridade:</strong> ALTA (SEO)</p>

<hr />

<h4 id="9.phpstan10min-m√âdio"><strong>9. PHPStan</strong> (10min) - M√âDIO</h4>

<p><strong>Objetivo:</strong> An√°lise est√°tica, detectar bugs antes de acontecerem</p>

<p><strong>Instala√ß√£o:</strong></p>

<pre><code class="bash">cd /Users/fabiochezzi/Documents/websites/aegis
composer require --dev phpstan/phpstan
</code></pre>

<p><strong>Configura√ß√£o:</strong> <code>/phpstan.neon</code></p>

<pre><code class="neon">parameters:
    level: 6
    paths:
        - core
        - admin
        - modules
        - public
    excludePaths:
        - */vendor/*
        - */storage/*
    ignoreErrors:
        - '#Call to an undefined method PDO::#'
</code></pre>

<p><strong>Rodar an√°lise:</strong></p>

<pre><code class="bash">vendor/bin/phpstan analyse
</code></pre>

<p><strong>Integrar git hook (opcional):</strong> <code>.git/hooks/pre-commit</code></p>

<pre><code class="bash">#!/bin/bash
vendor/bin/phpstan analyse --error-format=table
if [ $? -ne 0 ]; then
    echo &quot;‚ùå PHPStan encontrou erros. Commit bloqueado.&quot;
    exit 1
fi
</code></pre>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] PHPStan instalado</li>
<li>[ ] Roda sem erro fatal</li>
<li>[ ] Identifica problemas reais</li>
<li>[ ] Level 6 funcionando</li>
</ul>

<hr />

<h3 id="tier2:importante12h-14h"><strong>TIER 2: IMPORTANTE (12h-14h)</strong></h3>

<hr />

<h4 id="10.ratelimiting2h-alto"><strong>10. Rate Limiting</strong> (2h) - ALTO</h4>

<p><strong>Objetivo:</strong> Proteger contra bots, brute force, DDoS b√°sico</p>

<p><strong>Classe:</strong> <code>core/RateLimit.php</code></p>

<pre><code class="php">&lt;?php
/**
 * RateLimit - Prote√ß√£o contra brute force e DDoS
 */
class RateLimit {

    public static function check($key, $maxAttempts = 10, $windowSeconds = 60) {
        $db = DB::connect();

        // Limpa expirados
        $db-&gt;query(&quot;DELETE FROM rate_limits WHERE expires_at &lt; NOW()&quot;);

        // Conta tentativas
        $stmt = $db-&gt;prepare(&quot;
            SELECT COUNT(*) FROM rate_limits
            WHERE key_hash = ? AND expires_at &gt; NOW()
        &quot;);
        $keyHash = hash('sha256', $key);
        $stmt-&gt;execute([$keyHash]);
        $count = $stmt-&gt;fetchColumn();

        if ($count &gt;= $maxAttempts) {
            http_response_code(429);
            exit(json_encode(['error' =&gt; 'Too many requests. Try again later.']));
        }

        // Registra tentativa
        $expiresAt = date('Y-m-d H:i:s', time() + $windowSeconds);
        $db-&gt;prepare(&quot;
            INSERT INTO rate_limits (id, key_hash, expires_at)
            VALUES (?, ?, ?)
        &quot;)-&gt;execute([Core::generateUUID(), $keyHash, $expiresAt]);
    }
}
</code></pre>

<p><strong>Tabela:</strong></p>

<pre><code class="sql">CREATE TABLE rate_limits (
    id CHAR(36) PRIMARY KEY,
    key_hash CHAR(64) NOT NULL,
    expires_at DATETIME NOT NULL,
    INDEX idx_key_expires (key_hash, expires_at)
) ENGINE=InnoDB;
</code></pre>

<p><strong>Uso:</strong></p>

<pre><code class="php">// Login admin
RateLimit::check('admin_login:' . $_SERVER['REMOTE_ADDR'], 5, 300); // 5 tentativas / 5min

// Login members
RateLimit::check('member_login:' . $_SERVER['REMOTE_ADDR'], 10, 600); // 10 / 10min

// Formul√°rio contato
RateLimit::check('contact_form:' . $_SERVER['REMOTE_ADDR'], 3, 3600); // 3 / 1h

// APIs p√∫blicas
RateLimit::check('api:' . $_SERVER['REMOTE_ADDR'], 100, 60); // 100 / 1min
</code></pre>

<p><strong>Locais cr√≠ticos:</strong></p>

<ul>
<li><code>/admin/login</code> (admin/controllers/AuthController.php)</li>
<li><code>/login</code> (members, se houver)</li>
<li><code>/api/*</code> (todos endpoints p√∫blicos)</li>
<li>Formul√°rios de contato/lead</li>
</ul>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] Login bloqueado ap√≥s X tentativas</li>
<li>[ ] Mensagem de erro 429 clara</li>
<li>[ ] Limite reseta ap√≥s tempo configurado</li>
<li>[ ] APIs p√∫blicas protegidas</li>
</ul>

<p><strong>Estimativa:</strong> 2h dev
<strong>Custo:</strong> $0
<strong>Prioridade:</strong> ALTA</p>

<hr />

<h4 id="11.googlesearchconsoleapi5-6h-alto"><strong>11. Google Search Console API</strong> (5&#8211;6h) - ALTO</h4>

<p><strong>Objetivo:</strong> Dados SEO (queries, posi√ß√µes, cliques) + Core Web Vitals</p>

<p><strong>Etapa 1: Service Account (30min)</strong></p>

<ol>
<li>Google Cloud Console: https://console.cloud.google.com</li>
<li>Criar projeto &#8220;AEGIS SEO&#8221;</li>
<li>Ativar APIs:</li>
</ol>

<ul>
<li> Search Console API</li>
<li> PageSpeed Insights API</li>
</ul>

<ol>
<li>Criar Service Account:</li>
</ol>

<ul>
<li> Nome: &#8220;aegis-service-account&#8221;</li>
<li> Baixar JSON de credenciais</li>
</ul>

<ol>
<li>Adicionar Service Account no Search Console:</li>
</ol>

<ul>
<li> https://search.google.com/search-console</li>
<li> Settings ‚Üí Users ‚Üí Add User</li>
<li> Email: <code>aegis-service-account@[project-id].iam.gserviceaccount.com</code></li>
<li> Permission: Owner</li>
</ul>

<p><strong>Etapa 2: Tabelas MySQL (15min)</strong></p>

<pre><code class="sql">-- Queries (palavras-chave)
CREATE TABLE gsc_queries (
    id CHAR(36) PRIMARY KEY,
    query VARCHAR(512) NOT NULL,
    date DATE NOT NULL,
    clicks INT DEFAULT 0,
    impressions INT DEFAULT 0,
    ctr DECIMAL(5,4) DEFAULT 0,
    position DECIMAL(5,2) DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_date (date),
    INDEX idx_query (query(191)),
    INDEX idx_position (position)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Pages
CREATE TABLE gsc_pages (
    id CHAR(36) PRIMARY KEY,
    page_url VARCHAR(512) NOT NULL,
    date DATE NOT NULL,
    clicks INT DEFAULT 0,
    impressions INT DEFAULT 0,
    ctr DECIMAL(5,4) DEFAULT 0,
    position DECIMAL(5,2) DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_date (date),
    INDEX idx_url (page_url(191))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Core Web Vitals
CREATE TABLE gsc_vitals (
    id CHAR(36) PRIMARY KEY,
    page_url VARCHAR(512) NOT NULL,
    metric_type ENUM('LCP', 'FID', 'CLS') NOT NULL,
    good_percent DECIMAL(5,2) DEFAULT 0,
    needs_improvement_percent DECIMAL(5,2) DEFAULT 0,
    poor_percent DECIMAL(5,2) DEFAULT 0,
    device ENUM('DESKTOP', 'MOBILE') NOT NULL,
    date DATE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_date (date),
    INDEX idx_url (page_url(191))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Errors (404s, etc)
CREATE TABLE gsc_errors (
    id CHAR(36) PRIMARY KEY,
    page_url VARCHAR(512) NOT NULL,
    error_type VARCHAR(100) NOT NULL,
    severity ENUM('ERROR', 'WARNING') NOT NULL,
    detected_at DATE NOT NULL,
    resolved BOOLEAN DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_detected (detected_at),
    INDEX idx_resolved (resolved)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
</code></pre>

<p><strong>Etapa 3: Classe PHP (2&#8211;3h)</strong> - <code>/core/GoogleSearchConsole.php</code></p>

<pre><code class="php">&lt;?php
/**
 * GoogleSearchConsole - Integra√ß√£o com API do Google Search Console
 */
class GoogleSearchConsole {

    private $client;
    private $service;
    private $siteUrl;

    public function __construct() {
        $credentialsPath = ROOT_PATH . 'config/google-service-account.json';

        if (!file_exists($credentialsPath)) {
            throw new Exception('Google Service Account credentials not found');
        }

        // Usar biblioteca oficial Google
        // composer require google/apiclient
        $this-&gt;client = new Google_Client();
        $this-&gt;client-&gt;setAuthConfig($credentialsPath);
        $this-&gt;client-&gt;addScope(Google_Service_SearchConsole::WEBMASTERS_READONLY);

        $this-&gt;service = new Google_Service_SearchConsole($this-&gt;client);
        $this-&gt;siteUrl = APP_URL;
    }

    /**
     * Sincronizar queries (√∫ltimos 7 dias)
     */
    public function syncQueries($startDate = null, $endDate = null) {
        $startDate = $startDate ?? date('Y-m-d', strtotime('-7 days'));
        $endDate = $endDate ?? date('Y-m-d', strtotime('-1 day'));

        $request = new Google_Service_SearchConsole_SearchAnalyticsQueryRequest();
        $request-&gt;setStartDate($startDate);
        $request-&gt;setEndDate($endDate);
        $request-&gt;setDimensions(['query', 'date']);
        $request-&gt;setRowLimit(1000);

        $response = $this-&gt;service-&gt;searchanalytics-&gt;query($this-&gt;siteUrl, $request);

        $db = DB::connect();

        foreach ($response-&gt;getRows() as $row) {
            $query = $row-&gt;getKeys()[0];
            $date = $row-&gt;getKeys()[1];
            $clicks = $row-&gt;getClicks();
            $impressions = $row-&gt;getImpressions();
            $ctr = $row-&gt;getCtr();
            $position = $row-&gt;getPosition();

            $stmt = $db-&gt;prepare(&quot;
                INSERT INTO gsc_queries (id, query, date, clicks, impressions, ctr, position)
                VALUES (?, ?, ?, ?, ?, ?, ?)
                ON DUPLICATE KEY UPDATE
                    clicks = VALUES(clicks),
                    impressions = VALUES(impressions),
                    ctr = VALUES(ctr),
                    position = VALUES(position)
            &quot;);

            $id = Core::generateUUID();
            $stmt-&gt;execute([$id, $query, $date, $clicks, $impressions, $ctr, $position]);
        }

        return count($response-&gt;getRows());
    }

    /**
     * Sincronizar p√°ginas
     */
    public function syncPages($startDate = null, $endDate = null) {
        $startDate = $startDate ?? date('Y-m-d', strtotime('-7 days'));
        $endDate = $endDate ?? date('Y-m-d', strtotime('-1 day'));

        $request = new Google_Service_SearchConsole_SearchAnalyticsQueryRequest();
        $request-&gt;setStartDate($startDate);
        $request-&gt;setEndDate($endDate);
        $request-&gt;setDimensions(['page', 'date']);
        $request-&gt;setRowLimit(1000);

        $response = $this-&gt;service-&gt;searchanalytics-&gt;query($this-&gt;siteUrl, $request);

        $db = DB::connect();

        foreach ($response-&gt;getRows() as $row) {
            $pageUrl = $row-&gt;getKeys()[0];
            $date = $row-&gt;getKeys()[1];
            $clicks = $row-&gt;getClicks();
            $impressions = $row-&gt;getImpressions();
            $ctr = $row-&gt;getCtr();
            $position = $row-&gt;getPosition();

            $stmt = $db-&gt;prepare(&quot;
                INSERT INTO gsc_pages (id, page_url, date, clicks, impressions, ctr, position)
                VALUES (?, ?, ?, ?, ?, ?, ?)
                ON DUPLICATE KEY UPDATE
                    clicks = VALUES(clicks),
                    impressions = VALUES(impressions),
                    ctr = VALUES(ctr),
                    position = VALUES(position)
            &quot;);

            $id = Core::generateUUID();
            $stmt-&gt;execute([$id, $pageUrl, $date, $clicks, $impressions, $ctr, $position]);
        }

        return count($response-&gt;getRows());
    }
}
</code></pre>

<p><strong>Etapa 4: API Endpoint (15min)</strong> - <code>/admin/api/sync-gsc.php</code></p>

<pre><code class="php">&lt;?php
require_once '../../bootstrap.php';

Auth::require(); // S√≥ admin pode sincronizar

try {
    $gsc = new GoogleSearchConsole();

    $queriesCount = $gsc-&gt;syncQueries();
    $pagesCount = $gsc-&gt;syncPages();

    echo json_encode([
        'success' =&gt; true,
        'queries_synced' =&gt; $queriesCount,
        'pages_synced' =&gt; $pagesCount
    ]);

} catch (Exception $e) {
    http_response_code(500);
    echo json_encode([
        'success' =&gt; false,
        'error' =&gt; $e-&gt;getMessage()
    ]);
}
</code></pre>

<p><strong>Etapa 5: Views Admin (1&#8211;2h)</strong></p>

<ul>
<li><code>/admin/seo/overview</code> (vis√£o geral)</li>
<li><code>/admin/seo/keywords</code> (monitoramento queries)</li>
<li><code>/admin/seo/vitals</code> (Core Web Vitals por p√°gina)</li>
<li><code>/admin/seo/errors</code> (404s, problemas de indexa√ß√£o)</li>
</ul>

<p><strong>Automa√ß√£o n8n:</strong></p>

<ul>
<li>Cron di√°rio (2h): Sincroniza dados de ontem</li>
<li>Alertas autom√°ticos:</li>
<li> P√°gina caiu &gt;5 posi√ß√µes</li>
<li> Novas 404s detectadas</li>
<li> Core Web Vitals degradados</li>
</ul>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] Service Account criado</li>
<li>[ ] Credenciais JSON salvas</li>
<li>[ ] Tabelas MySQL criadas</li>
<li>[ ] Classe GoogleSearchConsole funciona</li>
<li>[ ] API endpoint retorna dados</li>
<li>[ ] Dados salvos no banco</li>
<li>[ ] Views admin acess√≠veis</li>
<li>[ ] Queries sincronizadas com posi√ß√µes corretas</li>
<li>[ ] Core Web Vitals aparecem</li>
<li>[ ] 404s detectadas aparecem</li>
</ul>

<p><strong>Estimativa:</strong> 5&#8211;6h dev
<strong>Custo:</strong> $0/m√™s (API gr√°tis, ilimitada)
<strong>Prioridade:</strong> ALTA</p>

<hr />

<h4 id="12.googleanalyticsapi4-5h-m√âdio"><strong>12. Google Analytics API</strong> (4&#8211;5h) - M√âDIO</h4>

<p><strong>Objetivo:</strong> M√©tricas de tr√°fego salvas no MySQL + widgets no admin</p>

<p><strong>Setup necess√°rio:</strong></p>

<ol>
<li>Service Account Google Cloud (mesmas credenciais do GSC)</li>
<li>Ativar Google Analytics Data API</li>
<li>JSON de credenciais</li>
<li>Property ID do GA4</li>
</ol>

<p><strong>Tabelas MySQL:</strong></p>

<pre><code class="sql">-- M√©tricas di√°rias
CREATE TABLE analytics_daily (
    id CHAR(36) PRIMARY KEY,
    date DATE NOT NULL,
    sessions INT DEFAULT 0,
    users INT DEFAULT 0,
    pageviews INT DEFAULT 0,
    bounce_rate DECIMAL(5,2) DEFAULT 0,
    avg_duration DECIMAL(8,2) DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_date (date)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Performance por p√°gina
CREATE TABLE analytics_pages (
    id CHAR(36) PRIMARY KEY,
    page_url VARCHAR(512) NOT NULL,
    date DATE NOT NULL,
    pageviews INT DEFAULT 0,
    users INT DEFAULT 0,
    avg_time DECIMAL(8,2) DEFAULT 0,
    bounce_rate DECIMAL(5,2) DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_date (date),
    INDEX idx_url (page_url(191))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Origens de tr√°fego
CREATE TABLE analytics_sources (
    id CHAR(36) PRIMARY KEY,
    source VARCHAR(255) NOT NULL,
    medium VARCHAR(255) NOT NULL,
    date DATE NOT NULL,
    sessions INT DEFAULT 0,
    users INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_date (date)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
</code></pre>

<p><strong>Classe:</strong> <code>/core/GoogleAnalytics.php</code> (2&#8211;3h de dev)</p>

<p><strong>Widgets dashboard:</strong></p>

<ul>
<li>Usu√°rios hoje (compara√ß√£o vs ontem)</li>
<li>Pageviews hoje</li>
<li>Taxa de convers√£o</li>
<li>Dura√ß√£o m√©dia</li>
<li>Gr√°fico √∫ltimos 7 dias (Chart.js)</li>
</ul>

<p><strong>P√°ginas admin:</strong></p>

<ul>
<li><code>/admin/analytics/overview</code> (vis√£o geral)</li>
<li><code>/admin/analytics/pages</code> (p√°ginas mais visitadas)</li>
<li><code>/admin/analytics/sources</code> (origens de tr√°fego)</li>
</ul>

<p><strong>Automa√ß√£o n8n:</strong></p>

<ul>
<li>Cron di√°rio (1h): Sincroniza m√©tricas de ontem</li>
<li>Cache 5min em widgets ao vivo</li>
</ul>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] Dados sincronizados nas √∫ltimas 24h</li>
<li>[ ] Widgets dashboard mostram m√©tricas corretas (comparar com GA4 web)</li>
<li>[ ] Gr√°ficos renderizam sem erro de console</li>
<li>[ ] Compara√ß√£o de per√≠odos calcula diferen√ßas corretamente</li>
<li>[ ] Cache de 5min funcionando</li>
<li>[ ] P√°ginas admin acess√≠veis</li>
</ul>

<p><strong>Estimativa:</strong> 4&#8211;5h dev
<strong>Custo:</strong> $0/m√™s (API gr√°tis at√© 50k requests/dia)
<strong>Prioridade:</strong> M√âDIA</p>

<hr />

<h3 id="tier3:bomter6h-7h"><strong>TIER 3: BOM TER (6h-7h)</strong></h3>

<hr />

<h4 id="13.loggermelhorado3h-m√âdio"><strong>13. Logger Melhorado</strong> (3h) - M√âDIO</h4>

<p><strong>Objetivo:</strong> Logs estruturados, busca f√°cil, alertas autom√°ticos</p>

<p><strong>Classe:</strong> <code>core/Logger.php</code></p>

<pre><code class="php">&lt;?php
class Logger {
    const CRITICAL = 'CRITICAL';
    const ERROR = 'ERROR';
    const WARNING = 'WARNING';
    const INFO = 'INFO';

    public static function log($level, $message, $context = []) {
        $db = DB::connect();

        $log = [
            'id' =&gt; Core::generateUUID(),
            'level' =&gt; $level,
            'message' =&gt; $message,
            'context' =&gt; json_encode($context),
            'url' =&gt; $_SERVER['REQUEST_URI'] ?? 'CLI',
            'method' =&gt; $_SERVER['REQUEST_METHOD'] ?? 'CLI',
            'user_id' =&gt; Auth::getUserId() ?? null,
            'ip' =&gt; $_SERVER['REMOTE_ADDR'] ?? 'unknown',
            'user_agent' =&gt; $_SERVER['HTTP_USER_AGENT'] ?? 'CLI',
            'created_at' =&gt; date('Y-m-d H:i:s')
        ];

        $stmt = $db-&gt;prepare(&quot;
            INSERT INTO system_logs
            (id, level, message, context, url, method, user_id, ip, user_agent, created_at)
            VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
        &quot;);

        $stmt-&gt;execute([
            $log['id'], $log['level'], $log['message'], $log['context'],
            $log['url'], $log['method'], $log['user_id'], $log['ip'],
            $log['user_agent'], $log['created_at']
        ]);

        if ($level === self::CRITICAL) {
            self::sendAlert($log);
        }
    }

    public static function critical($msg, $ctx = []) { self::log(self::CRITICAL, $msg, $ctx); }
    public static function error($msg, $ctx = []) { self::log(self::ERROR, $msg, $ctx); }
    public static function warning($msg, $ctx = []) { self::log(self::WARNING, $msg, $ctx); }
    public static function info($msg, $ctx = []) { self::log(self::INFO, $msg, $ctx); }

    private static function sendAlert($log) {
        // n8n webhook ou email direto
        $webhook = 'https://n8n.local/webhook/critical-log';
        file_get_contents($webhook . '?' . http_build_query($log));
    }
}
</code></pre>

<p><strong>Tabela:</strong></p>

<pre><code class="sql">CREATE TABLE system_logs (
    id CHAR(36) PRIMARY KEY,
    level ENUM('CRITICAL', 'ERROR', 'WARNING', 'INFO') NOT NULL,
    message TEXT NOT NULL,
    context JSON,
    url VARCHAR(512),
    method VARCHAR(10),
    user_id CHAR(36),
    ip VARCHAR(45),
    user_agent TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_level (level),
    INDEX idx_created (created_at),
    INDEX idx_user (user_id)
) ENGINE=InnoDB;
</code></pre>

<p><strong>View admin:</strong> <code>/admin/logs</code></p>

<ul>
<li>Filtros: level, data, usu√°rio, URL</li>
<li>Busca: &#8220;erro no m√≥dulo artigos&#8221;</li>
<li>Export CSV</li>
<li>Auto-delete &gt; 90 dias (cron)</li>
</ul>

<p><strong>Uso:</strong></p>

<pre><code class="php">try {
    // c√≥digo
} catch (Exception $e) {
    Logger::error('Falha ao processar artigo', [
        'artigo_id' =&gt; $id,
        'exception' =&gt; $e-&gt;getMessage()
    ]);
}

Logger::info('Usu√°rio fez login', ['user_id' =&gt; $userId]);
Logger::critical('Database connection failed');
</code></pre>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] Logs salvos no banco corretamente</li>
<li>[ ] Filtros funcionam</li>
<li>[ ] Busca funciona</li>
<li>[ ] Export CSV funciona</li>
<li>[ ] Alertas cr√≠ticos disparam</li>
<li>[ ] Auto-delete &gt; 90 dias funcionando</li>
</ul>

<p><strong>Estimativa:</strong> 3h dev
<strong>Custo:</strong> $0
<strong>Prioridade:</strong> M√âDIA</p>

<hr />

<h4 id="14.cruzamentodedadosia2h-m√âdio"><strong>14. Cruzamento de Dados IA</strong> (2h) - M√âDIO</h4>

<p><strong>Objetivo:</strong> Insights poderosos combinando GA + GSC + PageSpeed</p>

<p><strong>Exemplos de queries:</strong></p>

<p><strong>Oportunidades SEO:</strong></p>

<pre><code class="sql">-- P√°ginas com muito tr√°fego GA mas pouco SEO (otimizar)
SELECT ga.page_url, ga.users, gsc.clicks, gsc.position
FROM analytics_pages ga
LEFT JOIN gsc_pages gsc ON ga.page_url = gsc.page_url
WHERE ga.users &gt; 500 AND gsc.clicks &lt; 100 AND gsc.position &gt; 10;
</code></pre>

<p><strong>Performance vs Convers√£o:</strong></p>

<pre><code class="sql">-- P√°ginas lentas que afetam convers√£o
SELECT ps.url, ps.performance_score, ga.bounce_rate, ga.avg_time
FROM tbl_pagespeed_reports ps
JOIN analytics_pages ga ON ps.url = ga.page_url
WHERE ps.performance_score &lt; 50 AND ga.bounce_rate &gt; 60;
</code></pre>

<p><strong>IA analisa automaticamente e inclui no relat√≥rio:</strong></p>

<pre><code class="markdown">## üí° Oportunidades Detectadas

1. **/servicos/premium** tem 1.200 visitas/m√™s (GA) mas s√≥ 45 v√™m do Google (GSC).
   Posi√ß√£o m√©dia: 18.2
   **A√ß√£o:** Otimizar SEO ‚Üí Potencial de +400 visitas org√¢nicas/m√™s

2. **/artigos** tem PageSpeed 68/100 e bounce rate 72%.
   **A√ß√£o:** Melhorar performance ‚Üí Reduzir bounce rate ~15%
</code></pre>

<p><strong>Estimativa:</strong> 2h dev (queries + l√≥gica IA)
<strong>Prioridade:</strong> M√âDIA
<strong>Depend√™ncias:</strong> GA + GSC + PageSpeed implementados</p>

<hr />

<h4 id="15.php_codesniffer15min-baixo"><strong>15. PHP_CodeSniffer</strong> (15min) - BAIXO</h4>

<p><strong>Objetivo:</strong> Padr√£o de c√≥digo consistente (PSR-12, etc)</p>

<p><strong>Instala√ß√£o:</strong></p>

<pre><code class="bash">cd /Users/fabiochezzi/Documents/websites/aegis
composer require --dev squizlabs/php_codesniffer
</code></pre>

<p><strong>Configura√ß√£o:</strong> <code>/phpcs.xml</code></p>

<pre><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;ruleset name=&quot;AEGIS&quot;&gt;
    &lt;description&gt;AEGIS Framework Code Standards&lt;/description&gt;

    &lt;rule ref=&quot;PSR12&quot;/&gt;

    &lt;file&gt;core&lt;/file&gt;
    &lt;file&gt;admin&lt;/file&gt;
    &lt;file&gt;modules&lt;/file&gt;

    &lt;exclude-pattern&gt;*/vendor/*&lt;/exclude-pattern&gt;
    &lt;exclude-pattern&gt;*/storage/*&lt;/exclude-pattern&gt;
&lt;/ruleset&gt;
</code></pre>

<p><strong>Rodar verifica√ß√£o:</strong></p>

<pre><code class="bash">vendor/bin/phpcs

# Fix autom√°tico
vendor/bin/phpcbf
</code></pre>

<p><strong>Integrar git hook:</strong> <code>.git/hooks/pre-commit</code></p>

<pre><code class="bash">#!/bin/bash
vendor/bin/phpcs --standard=PSR12
if [ $? -ne 0 ]; then
    echo &quot;‚ùå Code style violations. Run phpcbf to fix.&quot;
    exit 1
fi
</code></pre>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] PHP_CodeSniffer instalado</li>
<li>[ ] Roda sem erro fatal</li>
<li>[ ] Identifica viola√ß√µes de estilo</li>
<li>[ ] phpcbf corrige automaticamente</li>
</ul>

<p><strong>Estimativa:</strong> 15min
<strong>Custo:</strong> $0
<strong>Prioridade:</strong> BAIXA</p>

<hr />

<h4 id="16.microsoftclarity10min-baixo"><strong>16. Microsoft Clarity</strong> (10min) - BAIXO</h4>

<p><strong>Objetivo:</strong> Session recordings + heatmaps (ver o que usu√°rio faz)</p>

<p><strong>Setup:</strong></p>

<ol>
<li>Acessar: https://clarity.microsoft.com</li>
<li>Sign up (gr√°tis ilimitado)</li>
<li>Add New Project:</li>
</ol>

<ul>
<li> Name: AEGIS - [Nome Projeto]</li>
<li> Website: https://seusite.com</li>
</ul>

<ol>
<li>Copy tracking code</li>
<li>Adicionar em <code>frontend/includes/_head.php</code> (ap√≥s GTM):</li>
</ol>

<pre><code class="html">&lt;!-- Microsoft Clarity --&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src=&quot;https://www.clarity.ms/tag/&quot;+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, &quot;clarity&quot;, &quot;script&quot;, &quot;SEU_PROJECT_ID&quot;);
&lt;/script&gt;
</code></pre>

<p><strong>Funcionalidades:</strong></p>

<ul>
<li>Grava√ß√£o de sess√µes (usu√°rio navegando)</li>
<li>Heatmaps de cliques</li>
<li>Scroll maps</li>
<li>Rage clicks (usu√°rio clicando repetido = frustra√ß√£o)</li>
<li>Dead clicks (clicou mas nada aconteceu)</li>
</ul>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] Script instalado</li>
<li>[ ] Clarity detectando visitas</li>
<li>[ ] Sess√µes gravadas aparecem no dashboard</li>
<li>[ ] Heatmaps gerando dados</li>
</ul>

<p><strong>Estimativa:</strong> 10min
<strong>Custo:</strong> $0/m√™s (gr√°tis ilimitado)
<strong>Prioridade:</strong> BAIXA (UX insights)</p>

<hr />

<h4 id="17.pa11yacessibilidade30min-baixo"><strong>17. Pa11y (Acessibilidade)</strong> (30min) - BAIXO</h4>

<p><strong>Objetivo:</strong> Detectar problemas de acessibilidade (WCAG compliance)</p>

<p><strong>Instala√ß√£o:</strong></p>

<pre><code class="bash">npm install -g pa11y
</code></pre>

<p><strong>Rodar teste:</strong></p>

<pre><code class="bash">pa11y https://seusite.com

# Teste completo
pa11y https://seusite.com --standard WCAG2AA --reporter html &gt; report.html
</code></pre>

<p><strong>Automatizar (n8n workflow mensal):</strong></p>

<pre><code>Cron (1¬∫ dia do m√™s):
  ‚Üí Execute Command: pa11y https://seusite.com --reporter json
  ‚Üí Parse JSON
  ‚Üí If errors &gt; 10:
      ‚Üí Send Email (lista de problemas)
      ‚Üí Create GitHub Issue (se integrado)
</code></pre>

<p><strong>Problemas comuns detectados:</strong></p>

<ul>
<li>Imagens sem atributo <code>alt</code></li>
<li>Links sem texto descritivo</li>
<li>Contraste de cores insuficiente</li>
<li>Form labels ausentes</li>
<li>Headings fora de ordem (H1 ‚Üí H3, pulou H2)</li>
</ul>

<p><strong>Valida√ß√£o:</strong></p>

<ul>
<li>[ ] Pa11y instalado</li>
<li>[ ] Roda sem erro</li>
<li>[ ] Identifica problemas reais</li>
<li>[ ] Relat√≥rio HTML leg√≠vel</li>
</ul>

<p><strong>Estimativa:</strong> 30min setup
<strong>Custo:</strong> $0
<strong>Prioridade:</strong> BAIXA (se cliente precisa compliance)</p>

<hr />

<h3 id="tier4:opcional3h-4h"><strong>TIER 4: OPCIONAL (3h-4h)</strong></h3>

<hr />

<h4 id="18.eventtrackingga42h-baixo"><strong>18. Event Tracking GA4</strong> (2h) - BAIXO</h4>

<p><strong>Objetivo:</strong> Rastrear convers√µes importantes</p>

<p><strong>Eventos importantes:</strong></p>

<ul>
<li>Lead gerado (formul√°rio enviado)</li>
<li>Artigo baixado</li>
<li>Contato via WhatsApp</li>
<li>Tempo em p√°gina &gt; 3min (engajamento)</li>
<li>Scroll 75% (leu at√© o fim)</li>
</ul>

<p><strong>Google Tag Manager (j√° instalado):</strong></p>

<pre><code class="javascript">// Formul√°rio enviado
document.querySelector('form').addEventListener('submit', function() {
    gtag('event', 'generate_lead', {
        'event_category': 'engagement',
        'event_label': 'contact_form'
    });
});

// Download artigo
gtag('event', 'file_download', {
    'file_name': 'artigo-cientifico.pdf',
    'file_extension': 'pdf'
});

// Scroll tracking
var scrolled75 = false;
window.addEventListener('scroll', function() {
    var scrollPercent = (window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100;
    if (scrollPercent &gt; 75 &amp;&amp; !scrolled75) {
        scrolled75 = true;
        gtag('event', 'scroll', {
            'event_category': 'engagement',
            'percent_scrolled': 75
        });
    }
});
</code></pre>

<p><strong>An√°lise no GA4:</strong></p>

<ul>
<li>Quais p√°ginas geram mais leads</li>
<li>Qual origem (SEO, social, direct) converte melhor</li>
<li>Funil: visita ‚Üí scroll ‚Üí formul√°rio ‚Üí convers√£o</li>
</ul>

<p><strong>Estimativa:</strong> 2h dev
<strong>Custo:</strong> $0
<strong>Prioridade:</strong> M√âDIA (se foco em convers√£o)</p>

<hr />

<h4 id="19.cdncloudflare15min-baixo"><strong>19. CDN Cloudflare</strong> (15min) - BAIXO</h4>

<p><strong>Objetivo:</strong> Cache global, prote√ß√£o DDoS, SSL gr√°tis</p>

<p><strong>Quando vale a pena:</strong></p>

<ul>
<li>‚úÖ Tr√°fego &gt; 5k visitas/dia</li>
<li>‚úÖ Usu√°rios em regi√µes distantes do servidor</li>
<li>‚úÖ Muitas imagens/assets pesados</li>
<li>‚ùå Site local (s√≥ SP, por exemplo)</li>
</ul>

<p><strong>Setup:</strong></p>

<pre><code class="bash"># 1. cloudflare.com ‚Üí Add site
# 2. Mudar DNS do dom√≠nio pros nameservers do Cloudflare
# 3. Configurar:
#    - SSL/TLS: Full
#    - Cache: Everything
#    - Auto Minify: CSS, JS, HTML
#    - Brotli: ON
#    - Rocket Loader: ON (testar, pode quebrar JS)
</code></pre>

<p><strong>Estimativa:</strong> 15min setup
<strong>Custo:</strong> $0/m√™s (plano Free)
<strong>Prioridade:</strong> BAIXA (avaliar ap√≥s tr√°fego crescer)</p>

<hr />

<h4 id="20.documenta√ß√£ocompleta2h-m√âdio"><strong>20. Documenta√ß√£o Completa</strong> (2h) - M√âDIO</h4>

<p><strong>Objetivo:</strong> Docs para admin e desenvolvedores</p>

<p><strong>Criar:</strong></p>

<p><strong>Admin Guides:</strong></p>

<ul>
<li><code>docs/admin-guide/analytics.md</code> - Como ler m√©tricas, gloss√°rio</li>
<li><code>docs/admin-guide/seo-reports.md</code> - Interpretar GSC, Core Web Vitals</li>
<li><code>docs/admin-guide/alerts.md</code> - Tipos de alerta, prioriza√ß√£o</li>
<li><code>docs/admin-guide/backup-restore.md</code> - Procedimento de emerg√™ncia</li>
</ul>

<p><strong>Docs T√©cnicos:</strong></p>

<ul>
<li><code>.claude/integrations/google-analytics.md</code> - Setup, API, troubleshooting</li>
<li><code>.claude/integrations/search-console.md</code> - Setup, queries, Core Web Vitals</li>
<li><code>.claude/integrations/ai-reports.md</code> - Como funciona, customizar relat√≥rios</li>
<li><code>.claude/security/rate-limiting.md</code> - Configura√ß√£o, whitelist, ajustes</li>
<li><code>.claude/backup-restore-guide.md</code> - Restaura√ß√£o passo a passo</li>
</ul>

<p><strong>Estimativa:</strong> 2h escrita + screenshots
<strong>Prioridade:</strong> M√âDIO</p>

<hr />

<h4 id="21.testesend-to-end1h-m√âdio"><strong>21. Testes End-to-End</strong> (1h) - M√âDIO</h4>

<p><strong>Objetivo:</strong> Validar que tudo funciona integrado</p>

<p><strong>Checklist:</strong></p>

<ul>
<li>[ ] Backup roda e restaura corretamente</li>
<li>[ ] Relat√≥rios IA geram diariamente</li>
<li>[ ] GA/GSC sincronizam dados</li>
<li>[ ] Rate limiting bloqueia ap√≥s X tentativas</li>
<li>[ ] Security headers score A</li>
<li>[ ] Sitemap.xml v√°lido</li>
<li>[ ] Logs estruturados funcionam</li>
<li>[ ] Alertas disparam corretamente</li>
</ul>

<p><strong>Estimativa:</strong> 1h valida√ß√£o
<strong>Prioridade:</strong> M√âDIO</p>

<hr />

<h2 id="üéØresultadofinalap√≥s1m√™s">üéØ RESULTADO FINAL (Ap√≥s 1 M√™s)</h2>

<pre><code>‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë         AEGIS Admin Dashboard - Vis√£o Consolidada         ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë                                                           ‚ïë
‚ïë  üìä ANALYTICS (Google Analytics 4)                        ‚ïë
‚ïë    ‚Ä¢ Usu√°rios: 1.240 hoje (‚Üë 8% vs ontem)               ‚ïë
‚ïë    ‚Ä¢ Pageviews: 3.680 (‚Üë 12%)                           ‚ïë
‚ïë    ‚Ä¢ Bounce rate: 42% (‚Üì 3%)                            ‚ïë
‚ïë    ‚Ä¢ Gr√°fico √∫ltimos 7 dias                              ‚ïë
‚ïë                                                           ‚ïë
‚ïë  üîç SEO (Google Search Console)                           ‚ïë
‚ïë    ‚Ä¢ Cliques hoje: 520 (‚Üë 18%)                          ‚ïë
‚ïë    ‚Ä¢ Posi√ß√£o m√©dia: 11.2 (‚Üë 0.8)                        ‚ïë
‚ïë    ‚Ä¢ Top 5 queries + posi√ß√µes                            ‚ïë
‚ïë    ‚Ä¢ Core Web Vitals: 85% p√°ginas OK                     ‚ïë
‚ïë                                                           ‚ïë
‚ïë  ‚ö° PERFORMANCE (PageSpeed Insights)                      ‚ïë
‚ïë    ‚Ä¢ Score m√©dio: 92/100                                 ‚ïë
‚ïë    ‚Ä¢ 3 p√°ginas precisam otimiza√ß√£o                       ‚ïë
‚ïë    ‚Ä¢ Tend√™ncia √∫ltimos 30 dias                           ‚ïë
‚ïë                                                           ‚ïë
‚ïë  ü§ñ RELAT√ìRIOS IA (Autom√°ticos)                          ‚ïë
‚ïë    ‚Ä¢ √öltimo: 15/02 08:00 - ‚úÖ 0 problemas cr√≠ticos      ‚ïë
‚ïë    ‚Ä¢ Hist√≥rico: 30 relat√≥rios                            ‚ïë
‚ïë    ‚Ä¢ Alertas: 2 avisos SEO                               ‚ïë
‚ïë                                                           ‚ïë
‚ïë  üö® ALERTAS ATIVOS                                        ‚ïë
‚ïë    ‚Ä¢ Uptime: 99.98% (7 dias)                            ‚ïë
‚ïë    ‚Ä¢ Backup: ‚úÖ √öltimo em 15/02 03:00                   ‚ïë
‚ïë    ‚Ä¢ Logs: 3 warnings (n√£o cr√≠ticos)                     ‚ïë
‚ïë                                                           ‚ïë
‚ïë  üîí SEGURAN√áA                                             ‚ïë
‚ïë    ‚Ä¢ Rate limiting: 12 bots bloqueados hoje             ‚ïë
‚ïë    ‚Ä¢ Security score: A (securityheaders.com)             ‚ïë
‚ïë    ‚Ä¢ Backups: 30 dias dispon√≠veis                        ‚ïë
‚ïë                                                           ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
</code></pre>

<p><strong>Funcionalidades Ativas:</strong></p>

<ul>
<li>‚úÖ Monitoramento 24/7 (uptime, m√©tricas, SEO, performance)</li>
<li>‚úÖ Automa√ß√£o completa (backups, relat√≥rios, alertas, syncs)</li>
<li>‚úÖ Seguran√ßa refor√ßada (rate limiting, headers, CSRF, sanitiza√ß√£o)</li>
<li>‚úÖ Intelig√™ncia artificial (insights, oportunidades, cruzamento de dados)</li>
<li>‚úÖ Custo total: <strong>$0&#8211;0.12/m√™s</strong></li>
</ul>

<hr />

<h2 id="üí∞estimativadecustos">üí∞ ESTIMATIVA DE CUSTOS</h2>

<h3 id="custosrecorrentes:">Custos Recorrentes:</h3>

<table>
<colgroup>
<col />
<col />
<col />
</colgroup>

<thead>
<tr>
	<th> Servi√ßo </th>
	<th> Plano </th>
	<th> Custo/m√™s </th>
</tr>
</thead>

<tbody>
<tr>
	<td> Google Analytics API </td>
	<td> Gr√°tis (50k requests/dia) </td>
	<td> $0 </td>
</tr>
<tr>
	<td> Search Console API </td>
	<td> Gr√°tis (ilimitado) </td>
	<td> $0 </td>
</tr>
<tr>
	<td> PageSpeed Insights API </td>
	<td> Gr√°tis (25k requests/dia) </td>
	<td> $0 </td>
</tr>
<tr>
	<td> UptimeRobot </td>
	<td> Free (50 monitores, 5min) </td>
	<td> $0 </td>
</tr>
<tr>
	<td> n8n </td>
	<td> Self-hosted </td>
	<td> $0 </td>
</tr>
<tr>
	<td> Claude Code </td>
	<td> Local (via Claude Pro) </td>
	<td> $0 </td>
</tr>
<tr>
	<td> Backup storage (Google Drive) </td>
	<td> 15GB gr√°tis </td>
	<td> $0 </td>
</tr>
<tr>
	<td> Backup storage (AWS S3) </td>
	<td> <sub>5GB</sub> √ó $0.023/GB </td>
	<td> $0.12 </td>
</tr>
<tr>
	<td> Cloudflare CDN </td>
	<td> Free plan </td>
	<td> $0 </td>
</tr>
<tr>
	<td> <strong>TOTAL</strong> </td>
	<td> </td>
	<td> <strong>$0&#8211;0.12/m√™s</strong> </td>
</tr>
</tbody>
</table>

<p><strong>Por projeto/ano:</strong> $0&#8211;1.44</p>

<p><strong>10 projetos/ano:</strong> $0&#8211;14.40 (vs $4.000&#8211;8.000 com WordPress + plugins)</p>

<p><strong>Economia anual:</strong> ~$4.000&#8211;8.000</p>

<hr />

<h2 id="üéØcronogramasugerido">üéØ CRONOGRAMA SUGERIDO</h2>

<h3 id="semana14-5h:">Semana 1 (4&#8211;5h):</h3>

<ul>
<li>‚úÖ UptimeRobot (5min)</li>
<li>‚úÖ Security Headers (40min)</li>
<li>‚úÖ Backup autom√°tico (1&#8211;2h)</li>
<li>‚úÖ Relat√≥rios IA (2&#8211;3h)</li>
<li>‚úÖ HTTPS/SSL (2min)</li>
<li>‚úÖ GTM/GA4 (3min)</li>
<li>‚úÖ robots.txt (5min)</li>
<li>‚úÖ PHPStan (10min)</li>
</ul>

<h3 id="semana212h-14h:">Semana 2 (12h-14h):</h3>

<ul>
<li>‚úÖ Sitemap (30min)</li>
<li>‚úÖ Rate Limiting (2h)</li>
<li>‚úÖ Google Search Console API (5&#8211;6h)</li>
<li>‚úÖ Google Analytics API (4&#8211;5h)</li>
</ul>

<h3 id="semana36h-7h:">Semana 3 (6h-7h):</h3>

<ul>
<li>‚úÖ Logger melhorado (3h)</li>
<li>‚úÖ Cruzamento de dados IA (2h)</li>
<li>‚úÖ PHP_CodeSniffer (15min)</li>
<li>‚úÖ Microsoft Clarity (10min)</li>
<li>‚úÖ Pa11y (30min)</li>
</ul>

<h3 id="semana43h-4h:">Semana 4 (3h-4h):</h3>

<ul>
<li>‚úÖ Event Tracking GA4 (2h)</li>
<li>‚úÖ CDN Cloudflare (15min)</li>
<li>‚úÖ Documenta√ß√£o (2h)</li>
<li>‚úÖ Testes end-to-end (1h)</li>
</ul>

<p><strong>Total: <sub>25</sub>&#8211;30h em 1 m√™s</strong></p>

<hr />

<h2 id="üÜöaegisvsalternativas">üÜö AEGIS vs ALTERNATIVAS</h2>

<h3 id="wordpresspluginspremium">WordPress + Plugins Premium</h3>

<table>
<colgroup>
<col />
<col />
<col />
</colgroup>

<thead>
<tr>
	<th> Feature </th>
	<th> WordPress </th>
	<th> AEGIS Framework </th>
</tr>
</thead>

<tbody>
<tr>
	<td> <strong>Analytics</strong> </td>
	<td> Jetpack Stats ($14/m√™s) ou MonsterInsights ($99/ano) </td>
	<td> GA integrado <strong>$0</strong> </td>
</tr>
<tr>
	<td> <strong>SEO</strong> </td>
	<td> Yoast Premium ($99/ano) ou RankMath Pro ($59/ano) </td>
	<td> GSC integrado <strong>$0</strong> </td>
</tr>
<tr>
	<td> <strong>Backups</strong> </td>
	<td> UpdraftPlus Premium ($70/ano) ou BackupBuddy ($80/ano) </td>
	<td> n8n autom√°tico <strong>$0</strong> </td>
</tr>
<tr>
	<td> <strong>Uptime</strong> </td>
	<td> Jetpack Monitor ($9/m√™s) ou ManageWP ($2/site) </td>
	<td> UptimeRobot <strong>$0</strong> </td>
</tr>
<tr>
	<td> <strong>Performance</strong> </td>
	<td> WP Rocket ($59/ano) ou NitroPack ($21/m√™s) </td>
	<td> PageSpeed nativo <strong>$0</strong> </td>
</tr>
<tr>
	<td> <strong>Security</strong> </td>
	<td> Wordfence Premium ($119/ano) ou Sucuri ($200/ano) </td>
	<td> Headers + Rate limit <strong>$0</strong> </td>
</tr>
<tr>
	<td> <strong>Logs</strong> </td>
	<td> Query Monitor (gr√°tis mas b√°sico) </td>
	<td> Logger estruturado <strong>$0</strong> </td>
</tr>
<tr>
	<td> <strong>Relat√≥rios IA</strong> </td>
	<td> N√£o existe </td>
	<td> Sistema pr√≥prio <strong>$0</strong> </td>
</tr>
<tr>
	<td> <strong>TOTAL/ano</strong> </td>
	<td> <strong>~$400&#8211;800/ano por site</strong> </td>
	<td> <strong>$0&#8211;6/ano</strong> </td>
</tr>
</tbody>
</table>

<p><strong>Vantagens AEGIS:</strong></p>

<ul>
<li>‚úÖ Tudo integrado (1 dashboard, n√£o 10 plugins)</li>
<li>‚úÖ N√£o quebra entre updates</li>
<li>‚úÖ Leve (WP + plugins = 100MB+, AEGIS = 15MB)</li>
<li>‚úÖ Customiz√°vel 100%</li>
<li>‚úÖ Dados consolidados</li>
<li>‚úÖ <strong>Custo pr√≥ximo de $0</strong></li>
</ul>

<hr />

<h2 id="üìäprioriza√á√Éogeral">üìä PRIORIZA√á√ÉO GERAL</h2>

<h3 id="üî¥cr√çticofazeragoraap√≥spagespeed:">üî¥ CR√çTICO (fazer AGORA ap√≥s PageSpeed):</h3>

<ol>
<li><strong>Uptime Monitoring</strong> (5min)</li>
<li><strong>Backup Autom√°tico</strong> (1&#8211;2h)</li>
<li><strong>Security Headers</strong> (40min)</li>
</ol>

<h3 id="üü†altofazeressasemana:">üü† ALTO (fazer essa semana):</h3>

<ol>
<li><strong>Sistema de Relat√≥rios IA</strong> (2&#8211;3h)</li>
<li><strong>Rate Limiting</strong> (2h)</li>
<li><strong>Sitemap Autom√°tico</strong> (30min)</li>
<li><strong>Google Search Console</strong> (5&#8211;6h)</li>
</ol>

<h3 id="üü°m√âdiofazeressem√™s:">üü° M√âDIO (fazer esse m√™s):</h3>

<ol>
<li><strong>Google Analytics</strong> (4&#8211;5h)</li>
<li><strong>Logger Melhorado</strong> (3h)</li>
<li><strong>Cruzamento de Dados</strong> (2h)</li>
<li><strong>PHPStan</strong> (10min)</li>
</ol>

<h3 id="üü¢baixoavaliarnecessidade:">üü¢ BAIXO (avaliar necessidade):</h3>

<ol>
<li><strong>PHP_CodeSniffer</strong> (15min)</li>
<li><strong>Microsoft Clarity</strong> (10min)</li>
<li><strong>Pa11y</strong> (30min)</li>
<li><strong>Event Tracking GA4</strong> (2h)</li>
<li><strong>CDN Cloudflare</strong> (15min - s√≥ se tr√°fego alto)</li>
</ol>

<h3 id="‚ö™muitobaixobacklogfuturo:">‚ö™ MUITO BAIXO (backlog futuro):</h3>

<ul>
<li>A/B Testing</li>
<li>Docker</li>
<li>Multi-idioma</li>
<li>PWA</li>
<li>WebSockets</li>
</ul>

<hr />

<h2 id="‚úÖchecklistdevalida√á√Éo">‚úÖ CHECKLIST DE VALIDA√á√ÉO</h2>

<h3 id="tier1:">TIER 1:</h3>

<ul>
<li>[ ] UptimeRobot ativo e alertando</li>
<li>[ ] https://securityheaders.com score ‚â• A</li>
<li>[ ] Backup manual testado e restaurado</li>
<li>[ ] Relat√≥rio IA gerado automaticamente</li>
<li>[ ] HTTPS funcionando</li>
<li>[ ] GTM/GA4 validado</li>
<li>[ ] robots.txt acess√≠vel</li>
<li>[ ] Sitemap.xml v√°lido</li>
<li>[ ] PHPStan rodando</li>
</ul>

<h3 id="tier2:">TIER 2:</h3>

<ul>
<li>[ ] Login bloqueado ap√≥s X tentativas</li>
<li>[ ] GSC sincronizando queries</li>
<li>[ ] GA sincronizando m√©tricas</li>
<li>[ ] Core Web Vitals aparecem</li>
<li>[ ] Widgets dashboard funcionando</li>
</ul>

<h3 id="tier3:">TIER 3:</h3>

<ul>
<li>[ ] Logs estruturados no banco</li>
<li>[ ] IA cruza dados e detecta oportunidades</li>
<li>[ ] PHP_CodeSniffer rodando</li>
<li>[ ] Clarity gravando sess√µes</li>
<li>[ ] Pa11y detecta problemas</li>
</ul>

<hr />

<h2 id="üíºimpactoesperado">üíº IMPACTO ESPERADO</h2>

<p><strong>Para voc√™ (desenvolvedor):</strong></p>

<ul>
<li>‚è±Ô∏è <strong>Tempo economizado:</strong> 5&#8211;10h/m√™s</li>
<li>üí∞ <strong>Custo economizado:</strong> $400&#8211;800/ano por projeto</li>
<li>üòå <strong>Stress reduzido:</strong> Alertas proativos</li>
<li>üìà <strong>Upsell:</strong> Mostra valor concreto</li>
<li>üéØ <strong>Profissionalismo:</strong> Dashboard classe mundial</li>
</ul>

<p><strong>Para o cliente:</strong></p>

<ul>
<li>üöÄ <strong>Site mais r√°pido:</strong> PageSpeed otimizado</li>
<li>üìä <strong>Transpar√™ncia:</strong> M√©tricas reais</li>
<li>üîí <strong>Seguran√ßa:</strong> Backups + prote√ß√£o</li>
<li>üìà <strong>Resultados:</strong> SEO melhorando</li>
<li>üí™ <strong>Confian√ßa:</strong> Problemas resolvidos antes de afetar</li>
</ul>

<hr />

<h2 id="üö®planoderollback">üö® PLANO DE ROLLBACK</h2>

<h3 id="seintegra√ß√£ogagscquebrarsite:">Se integra√ß√£o GA/GSC quebrar site:</h3>

<pre><code class="php">// Comentar inclus√£o da classe no bootstrap:
// require_once 'core/GoogleAnalytics.php';
</code></pre>

<p><strong>Tempo recupera√ß√£o:</strong> &lt; 15min</p>

<h3 id="sebackupfalhar:">Se backup falhar:</h3>

<pre><code class="bash"># Backup manual imediato
mysqldump -u user -p'pass' database | gzip &gt; manual-backup-$(date +%Y%m%d-%H%M).sql.gz
tar -czf manual-files-$(date +%Y%m%d-%H%M).tar.gz /path/to/aegis
</code></pre>

<p><strong>Tempo recupera√ß√£o:</strong> 30min</p>

<h3 id="seratelimitingbloquearusu√°riosleg√≠timos:">Se rate limiting bloquear usu√°rios leg√≠timos:</h3>

<pre><code class="sql">-- Limpar tabela para IP espec√≠fico
DELETE FROM rate_limits WHERE key_hash = SHA2('admin_login:192.168.1.100', 256);
</code></pre>

<p><strong>Tempo recupera√ß√£o:</strong> 5min</p>

<hr />

<h2 id="‚úÖconclus√Éo">‚úÖ CONCLUS√ÉO</h2>

<p><strong>Sistema completo ap√≥s todas as fases:</strong></p>

<pre><code>AEGIS Framework v18+
‚îú‚îÄ Monitoramento Total
‚îÇ  ‚îú‚îÄ Uptime (UptimeRobot - 5min intervals)
‚îÇ  ‚îú‚îÄ Analytics (GA4 - tr√°fego, convers√µes, comportamento)
‚îÇ  ‚îú‚îÄ SEO (Search Console - queries, posi√ß√µes, CWV)
‚îÇ  ‚îú‚îÄ Performance (PageSpeed + CWV reais)
‚îÇ  ‚îî‚îÄ Logs estruturados (cr√≠tico, erro, warning, info)
‚îÇ
‚îú‚îÄ Automa√ß√£o Completa
‚îÇ  ‚îú‚îÄ Backups di√°rios (banco + arquivos, 30 dias hist√≥rico)
‚îÇ  ‚îú‚îÄ Relat√≥rios IA di√°rios (insights, problemas, oportunidades)
‚îÇ  ‚îú‚îÄ Alertas proativos (uptime, SEO, performance, seguran√ßa)
‚îÇ  ‚îî‚îÄ Sincroniza√ß√£o de dados (GA, GSC, PageSpeed ‚Üí MySQL)
‚îÇ
‚îú‚îÄ Seguran√ßa Refor√ßada
‚îÇ  ‚îú‚îÄ Rate limiting (anti brute force, DDoS b√°sico)
‚îÇ  ‚îú‚îÄ Security headers (XSS, clickjacking, MIME sniff)
‚îÇ  ‚îú‚îÄ CSRF protection (j√° tem)
‚îÇ  ‚îî‚îÄ Input sanitization (j√° tem)
‚îÇ
‚îú‚îÄ Admin Dashboard Poderoso
‚îÇ  ‚îú‚îÄ Widgets ao vivo (GA + GSC + PageSpeed - cache 5min)
‚îÇ  ‚îú‚îÄ Hist√≥rico de m√©tricas (compara√ß√£o temporal)
‚îÇ  ‚îú‚îÄ Relat√≥rios IA (√∫ltimos 30 dias, busca, filtros)
‚îÇ  ‚îú‚îÄ Logs busc√°veis (por level, data, usu√°rio, URL)
‚îÇ  ‚îî‚îÄ Alertas centralizados (tudo em 1 lugar)
‚îÇ
‚îî‚îÄ SEO Otimizado
   ‚îú‚îÄ Sitemap autom√°tico (atualiza√ß√£o semanal)
   ‚îú‚îÄ Core Web Vitals monitorados (LCP, FID, CLS)
   ‚îú‚îÄ Keywords tracking (posi√ß√µes, tend√™ncias)
   ‚îî‚îÄ Oportunidades detectadas (IA analisa e sugere)
</code></pre>

<hr />

<p><strong>Vers√£o:</strong> 3.0.0 CONSOLIDADA
<strong>Criado em:</strong> 15/02/2026
<strong>Baseado em:</strong></p>

<ul>
<li><code>roadmap-melhorias.md</code> (2,252 linhas - vis√£o estrat√©gica)</li>
<li><code>INSTALACAO-FERRAMENTAS-COMPLETA.md</code> (634 linhas - c√≥digo pr√°tico)</li>
</ul>

<p><strong>Respons√°vel:</strong> Claude (Guardi√£o AEGIS)
<strong>Status:</strong> ‚úÖ Documento consolidado COMPLETO
<strong>Pr√≥ximo passo:</strong> Implementar TIER 1 (4&#8211;5h)</p>

</body>
</html>

