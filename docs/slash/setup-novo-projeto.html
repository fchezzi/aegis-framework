<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
	<meta charset="utf-8"/>
</head>
<body>

<h1 id="setupnovoprojetoaegis">Setup Novo Projeto AEGIS</h1>

<blockquote>
<p><strong>Quando usar:</strong> Tarefas de instala√ß√£o, configura√ß√£o inicial, troubleshooting de setup</p>
</blockquote>

<hr />

<h2 id="üìãprocessodeinstala√ß√£o">üìã Processo de Instala√ß√£o</h2>

<h3 id="1.uploadebancodedados">1. Upload e Banco de Dados</h3>

<pre><code class="bash"># 1. Upload arquivos para servidor
# 2. Criar banco MySQL ou configurar Supabase
# 3. Acessar setup.php no navegador
</code></pre>

<h3 id="2.wizarddeinstala√ß√£osetup.php">2. Wizard de Instala√ß√£o (setup.php)</h3>

<pre><code>Preencher:
- Tipo de banco: mysql / supabase / none
- Credenciais do banco
- URL do projeto (com ou sem subpasta)
- Email/senha do primeiro admin
</code></pre>

<p><strong>Resultado:</strong> Cria tabelas + admin + <code>_config.php</code></p>

<h3 id="3.loginadmin">3. Login Admin</h3>

<pre><code>Acessar: /admin
Usar credenciais criadas no wizard
</code></pre>

<hr />

<h2 id="‚öôÔ∏è_config.phpconfigura√ß√µesprincipais">‚öôÔ∏è _config.php (Configura√ß√µes Principais)</h2>

<h3 id="database">Database</h3>

<pre><code class="php">define('DB_TYPE', 'mysql');  // mysql, supabase, none
define('DB_HOST', 'localhost');
define('DB_NAME', 'nome_banco');
define('DB_USER', 'usuario');
define('DB_PASS', 'senha');
</code></pre>

<h3 id="environment">Environment</h3>

<pre><code class="php">define('DEBUG_MODE', false);  // true em dev, false em produ√ß√£o
define('APP_URL', 'https://seudominio.com');  // ou https://seudominio.com/subpasta
define('TIMEZONE', 'America/Sao_Paulo');
</code></pre>

<h3 id="memberssystem">Members System</h3>

<pre><code class="php">define('ENABLE_MEMBERS', true);  // false = todo frontend p√∫blico (REGRAS.md #5)
</code></pre>

<h3 id="security">Security</h3>

<pre><code class="php">define('AEGIS_API_TOKEN', 'token-aqui');  // Trocar em produ√ß√£o (REGRAS.md)
</code></pre>

<p><strong>‚ö†Ô∏è NUNCA versionar _config.php com credenciais reais</strong></p>

<hr />

<h2 id="üì¶instala√ß√£odem√≥dulos">üì¶ Instala√ß√£o de M√≥dulos</h2>

<h3 id="viaadmin">Via Admin</h3>

<pre><code>1. Acessar /admin/modules
2. Clicar &quot;Instalar&quot; no m√≥dulo desejado
3. Sistema cria tabelas automaticamente
</code></pre>

<h3 id="programaticamente">Programaticamente</h3>

<pre><code class="php">$result = ModuleManager::install('nome-modulo');
if ($result['success']) {
    // Instalado
}
</code></pre>

<p><strong>Fonte de verdade:</strong> <code>module.json</code> com <code>&quot;public&quot;: true/false</code> (REGRAS.md #10)</p>

<hr />

<h2 id="üõ°Ô∏èseguran√ßaemprodu√ß√£ochecklist">üõ°Ô∏è Seguran√ßa em Produ√ß√£o (Checklist)</h2>

<pre><code>‚ñ° DEBUG_MODE = false
‚ñ° Deletar setup.php do servidor
‚ñ° HTTPS habilitado
‚ñ° Senhas fortes
‚ñ° .htaccess configurado (Apache) ou nginx.conf
‚ñ° _config.php no .gitignore
‚ñ° AEGIS_API_TOKEN trocado
‚ñ° Permiss√µes corretas: 755 pastas, 644 arquivos
</code></pre>

<h3 id=".htaccessrecomendadoapache">.htaccess Recomendado (Apache)</h3>

<pre><code class="apache">RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]

# Security headers
&lt;IfModule mod_headers.c&gt;
    Header set X-Content-Type-Options &quot;nosniff&quot;
    Header set X-Frame-Options &quot;SAMEORIGIN&quot;
    Header set X-XSS-Protection &quot;1; mode=block&quot;
    Header set Referrer-Policy &quot;strict-origin-when-cross-origin&quot;
&lt;/IfModule&gt;

# Bloquear arquivos sens√≠veis
&lt;FilesMatch &quot;(^\..*|composer\.(json|lock)|package\.json|\.md)$&quot;&gt;
    Order allow,deny
    Deny from all
&lt;/FilesMatch&gt;
</code></pre>

<hr />

<h2 id="üÜòtroubleshootingproblemascomuns">üÜò Troubleshooting (Problemas Comuns)</h2>

<h3 id="500internalservererror">500 Internal Server Error</h3>

<pre><code class="bash"># 1. Verificar logs
tail -f storage/logs/error.log

# 2. Ativar debug tempor√°rio
# _config.php: DEBUG_MODE = true

# 3. Verificar permiss√µes
chmod 755 pasta/
chmod 644 arquivo.php

# 4. Verificar .htaccess existe
</code></pre>

<h3 id="404emtodasasrotas">404 em Todas as Rotas</h3>

<pre><code class="bash"># 1. Verificar .htaccess existe e est√° correto
# 2. Apache: verificar mod_rewrite habilitado
a2enmod rewrite
service apache2 restart

# 3. Verificar APP_URL em _config.php
# Deve incluir subpasta se houver
</code></pre>

<h3 id="uploadn√£ofunciona">Upload N√£o Funciona</h3>

<pre><code class="bash"># 1. Verificar permiss√µes
chmod 777 storage/uploads/

# 2. Verificar php.ini
upload_max_filesize = 10M
post_max_size = 10M

# 3. Verificar valida√ß√µes (REGRAS.md #9)
# - Tipo/extens√£o permitida
# - Tamanho m√°ximo
# - Mime type real
</code></pre>

<h3 id="emailn√£oenvia">Email N√£o Envia</h3>

<pre><code class="php">// Verificar configura√ß√µes SMTP em /admin/settings
// Gmail: usar App Password, n√£o senha normal
// https://myaccount.google.com/apppasswords

// Verificar logs
tail -f storage/logs/error.log
</code></pre>

<h3 id="bancodedadosn√£oconecta">Banco de Dados N√£o Conecta</h3>

<pre><code class="bash"># 1. Verificar credenciais em _config.php
# 2. Testar conex√£o manualmente
mysql -u usuario -p nome_banco

# 3. Verificar se banco existe
# 4. Verificar permiss√µes do usu√°rio MySQL
</code></pre>

<h3 id="m√≥dulon√£oinstala">M√≥dulo N√£o Instala</h3>

<pre><code class="bash"># 1. Verificar module.json existe
# 2. Verificar database/mysql-schema.sql ou supabase-schema.sql
# 3. Verificar logs de erro
# 4. Tentar instala√ß√£o manual via SQL
</code></pre>

<hr />

<h2 id="üîßcomandos√öteis">üîß Comandos √öteis</h2>

<h3 id="verificarinstala√ß√£o">Verificar Instala√ß√£o</h3>

<pre><code class="bash"># PHP est√° funcionando?
php -v

# M√≥dulos PHP instalados
php -m

# Logs em tempo real
tail -f storage/logs/error.log

# Testar sintaxe PHP
php -l arquivo.php
</code></pre>

<h3 id="permiss√µesr√°pidas">Permiss√µes R√°pidas</h3>

<pre><code class="bash"># Aplicar permiss√µes padr√£o
find . -type d -exec chmod 755 {} \;
find . -type f -exec chmod 644 {} \;

# Storage com escrita
chmod -R 777 storage/
</code></pre>

<hr />

<h2 id="üìöp√≥s-instala√ß√£o">üìö P√≥s-Instala√ß√£o</h2>

<h3 id="configurarviaadminsettings">Configurar via /admin/settings</h3>

<pre><code>Email (SMTP):
- Servidor: smtp.gmail.com
- Porta: 587 (TLS) ou 465 (SSL)
- Usu√°rio: email completo
- Senha: App Password

RD Station (opcional):
- API Key do painel RD Station

Tema:
- Cores (hex)
- Fontes (CSS)

TinyMCE (se usar editor):
- API Key de tiny.cloud
</code></pre>

<h3 id="pr√≥ximospassos">Pr√≥ximos Passos</h3>

<pre><code>1. Configurar SMTP em /admin/settings
2. Instalar m√≥dulos necess√°rios em /admin/modules
3. Criar conte√∫do inicial
4. Configurar backup do banco
5. Monitorar storage/logs/
</code></pre>

<hr />

<h2 id="üéØrefer√™ncias">üéØ Refer√™ncias</h2>

<ul>
<li><strong>REGRAS.md #5:</strong> Sistema sem members (ENABLE_MEMBERS = false)</li>
<li><strong>REGRAS.md #9:</strong> Upload valida√ß√µes obrigat√≥rias</li>
<li><strong>REGRAS.md #10:</strong> M√≥dulos vs P√°ginas</li>
<li><strong>known-issues.md:</strong> Problemas conhecidos com solu√ß√µes</li>
</ul>

<hr />

<p><strong>Vers√£o:</strong> 2.0.0
<strong>Data:</strong> 2026&#8211;02&#8211;14
<strong>Changelog:</strong> Removido workflows manuais e checklists de teste do usu√°rio, focado apenas em setup t√©cnico e troubleshooting</p>

</body>
</html>

